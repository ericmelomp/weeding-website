services:
  wedding-website:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: wedding-website
    ports:
      - "8080:80"
    # Volumes desabilitados - assets s√£o copiados no Dockerfile durante o build
    # Para desenvolvimento local com hot-reload, descomente as linhas abaixo:
    # volumes:
    #   - ./index.html:/usr/share/nginx/html/index.html
    #   - ./rsvp.html:/usr/share/nginx/html/rsvp.html
    #   - ./presentes.html:/usr/share/nginx/html/presentes.html
    #   - ./styles.css:/usr/share/nginx/html/styles.css
    #   - ./script.js:/usr/share/nginx/html/script.js
    #   - ./assets:/usr/share/nginx/html/assets
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

  cloudflared:
    image: cloudflare/cloudflared:latest
    container_name: cloudflared
    restart: unless-stopped
    command: tunnel --no-autoupdate run --token eyJhIjoiY2VhZWEzOTI0MzQzMTk4MGU2ZTQyNzZjYTk2ZWI2ZWUiLCJ0IjoiYWMwYmM5MGMtZWE3NS00NWY3LTllMDUtZTM5MmRmNTRkYmI0IiwicyI6Ik9EQmpaRGxsTWpZdE5qTmhNQzAwTVRObUxUZ3lOemd0WXpJM1ltTmxaR1l6TnpZdyJ9
